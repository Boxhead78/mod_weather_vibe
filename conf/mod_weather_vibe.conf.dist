#######################################################################################################
#######################################################################################################
#  mod_weather_vibe
#
# Notes
# - Use admin commands to drive weather per zone:
#     .wvibe set <zoneId> <type:0|1|2|3|86> <percentage:0..100>
#     .wvibe setRaw <zoneId> <type:0|1|2|3|86> <raw:0..1>
#     .wvibe show  (lists last-applied entries)
#######################################################################################################
#######################################################################################################

# Toggle module
# ----------------------------------------------------------------------
WeatherVibe.Enable = 1

# Optional debug (zone-wide broadcast of pushes)
# ----------------------------------------------------------------------
WeatherVibe.Debug = 1

#######################################################################################################
#######################################################################################################
# Dayparts & Season
#######################################################################################################

# Season: auto|spring|summer|autumn|winter.
# ----------------------------------------------------------------------
WeatherVibe.Season = auto

# Mode: auto|morning|afternoon|evening|night.
# ----------------------------------------------------------------------
WeatherVibe.DayPart.Mode = auto

# DayPart times.
# ----------------------------------------------------------------------
WeatherVibe.DayPart.MORNING.Start   = 06:00
WeatherVibe.DayPart.AFTERNOON.Start = 12:00
WeatherVibe.DayPart.EVENING.Start   = 18:00
WeatherVibe.DayPart.NIGHT.Start     = 22:00


#######################################################################################################
#######################################################################################################
# Internal intensity ranges - raw grade clamps per daypart/state
# Defaults: 0.30 – 1.00 for every WeatherState and every daypart.
#######################################################################################################

# Fine (0)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.Fine          = 0.00, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.Fine        = 0.00, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.Fine          = 0.00, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.Fine            = 0.00, 1.00

# Fog (1)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.Fog           = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.Fog         = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.Fog           = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.Fog             = 0.30, 1.00

# Light Rain (3)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.LightRain     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.LightRain   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.LightRain     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.LightRain       = 0.30, 1.00

# Medium Rain (4)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.MediumRain    = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.MediumRain  = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.MediumRain    = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.MediumRain      = 0.30, 1.00

# Heavy Rain (5)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.HeavyRain     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.HeavyRain   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.HeavyRain     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.HeavyRain       = 0.30, 1.00

# Light Snow (6)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.LightSnow     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.LightSnow   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.LightSnow     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.LightSnow       = 0.30, 1.00

# Medium Snow (7)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.MediumSnow    = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.MediumSnow  = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.MediumSnow    = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.MediumSnow      = 0.30, 1.00

# Heavy Snow (8)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.HeavySnow     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.HeavySnow   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.HeavySnow     = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.HeavySnow       = 0.30, 1.00

# Light Sandstorm (22)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.LightSandstorm   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.LightSandstorm = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.LightSandstorm   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.LightSandstorm     = 0.30, 1.00

# Medium Sandstorm (41)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.MediumSandstorm  = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.MediumSandstorm= 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.MediumSandstorm  = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.MediumSandstorm    = 0.30, 1.00

# Heavy Sandstorm (42)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.HeavySandstorm   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.HeavySandstorm = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.HeavySandstorm   = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.HeavySandstorm     = 0.30, 1.00

# Thunders (86)
# ----------------------------------------------------------------------
WeatherVibe.Intensity.InternalRange.MORNING.Thunders         = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.AFTERNOON.Thunders       = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.EVENING.Thunders         = 0.30, 1.00
WeatherVibe.Intensity.InternalRange.NIGHT.Thunders           = 0.30, 1.00


#######################################################################################################
#######################################################################################################
# Engine scheduling & fade controls (ADDED)
#######################################################################################################

# Heartbeat tick (seconds) for advancing fades or selecting new effects.
# Example: 10 means we evaluate every 10 seconds.
WeatherVibe.IntervalSec = 10

# Global cap on consecutive repeats of the same effect (per zone/daypart).
# When reached, that effect is excluded from the next roll.
WeatherVibe.Zone.Repeat.Max = 2

# Fade step size in RAW grade units (NOT percentage).
# Example: 0.05 moves 0.30 -> 0.35 -> 0.40 ...
WeatherVibe.Fade.StepValue = 0.07

# Each fade step waits a random duration in this range (seconds).
WeatherVibe.Fade.StepDuration.Min = 15
WeatherVibe.Fade.StepDuration.Max = 30

# Stagger zone updates so not all zones change at the same time.
# Engine should assign a random per-zone offset ∈ [0..MaxOffsetSec].
WeatherVibe.Scheduler.Spread.MaxOffsetSec = 20


#######################################################################################################
# Zone configuration — Dun Morogh (1)
# Schema:
# WeatherVibe.Zone.<zoneId>.<DAYPART>.<State> =
#   <weight> <min%> <max%> <minDwellSec> <maxDwellSec>
#
# % values map into the global InternalRange for that daypart+state.
#######################################################################################################

# Comma/space separated zone ids to load into the scheduler
#WeatherVibe.Zone.List = 1,3,4,8,10,11,12,14,15,16,17,25,28,33,36,38,40,41,44,45,46,47,51,65,66,67,85,130,139,141,148,207,210,215,267,331,357,361,394,400,405,406,440,457,490,493,495,618,796,1377,1397,1417,1497,1519,1537,1637,1638,1657,1941,1977,2017,2257,2597,2817,3277,3358,3428,3429,3430,3433,3455,3483,3487,3518,3519,3520,3521,3522,3523,3524,3525,3535,3540,3557,3605,3698,3702,3703,3711,3817,3820,3917,3979,4076,4080,4197,4201,4258,4298,4378,4384,4395,4406,4602,4603,4630,4710,4742,4763,4764,4832,4833,4895,4896,4897,14284,14285,14286,14288
WeatherVibe.Zone.List = 1,331

# --- MORNING (cold dawn, steady flakes)
WeatherVibe.Zone.1.MORNING.Fine             = 0.05  30  45    90   180
WeatherVibe.Zone.1.MORNING.Fog              = 0.15  30  55   180   360
WeatherVibe.Zone.1.MORNING.LightRain        = 0     0   0      0     0
WeatherVibe.Zone.1.MORNING.MediumRain       = 0     0   0      0     0
WeatherVibe.Zone.1.MORNING.HeavyRain        = 0     0   0      0     0
WeatherVibe.Zone.1.MORNING.LightSnow        = 0.45  35  60   270   420
WeatherVibe.Zone.1.MORNING.MediumSnow       = 0.25  30  55   180   360
WeatherVibe.Zone.1.MORNING.HeavySnow        = 0.05  25  45   120   240
WeatherVibe.Zone.1.MORNING.LightSandstorm   = 0     0   0      0     0
WeatherVibe.Zone.1.MORNING.MediumSandstorm  = 0     0   0      0     0
WeatherVibe.Zone.1.MORNING.HeavySandstorm   = 0     0   0      0     0
WeatherVibe.Zone.1.MORNING.Thunders         = 0     0   0      0     0

# --- AFTERNOON (bright cold with frequent snow)
WeatherVibe.Zone.1.AFTERNOON.Fine           = 0.08  30  50   120   240
WeatherVibe.Zone.1.AFTERNOON.Fog            = 0.10  25  50   120   300
WeatherVibe.Zone.1.AFTERNOON.LightRain      = 0     0   0      0     0
WeatherVibe.Zone.1.AFTERNOON.MediumRain     = 0     0   0      0     0
WeatherVibe.Zone.1.AFTERNOON.HeavyRain      = 0     0   0      0     0
WeatherVibe.Zone.1.AFTERNOON.LightSnow      = 0.44  35  60   270   420
WeatherVibe.Zone.1.AFTERNOON.MediumSnow     = 0.28  30  55   180   360
WeatherVibe.Zone.1.AFTERNOON.HeavySnow      = 0.10  25  45   120   240
WeatherVibe.Zone.1.AFTERNOON.LightSandstorm = 0     0   0      0     0
WeatherVibe.Zone.1.AFTERNOON.MediumSandstorm= 0     0   0      0     0
WeatherVibe.Zone.1.AFTERNOON.HeavySandstorm = 0     0   0      0     0
WeatherVibe.Zone.1.AFTERNOON.Thunders       = 0     0   0      0     0

# --- EVENING (temperatures dip, snow thickens)
WeatherVibe.Zone.1.EVENING.Fine             = 0.05  25  45    30   60
WeatherVibe.Zone.1.EVENING.Fog              = 0.12  30  55    90   120
WeatherVibe.Zone.1.EVENING.LightRain        = 0     0   0      0     0
WeatherVibe.Zone.1.EVENING.MediumRain       = 0     0   0      0     0
WeatherVibe.Zone.1.EVENING.HeavyRain        = 0     0   0      0     0
WeatherVibe.Zone.1.EVENING.LightSnow        = 0.40  35  60   120   180
WeatherVibe.Zone.1.EVENING.MediumSnow       = 0.30  30  55   90    120
WeatherVibe.Zone.1.EVENING.HeavySnow        = 0.13  25  45   60     90
WeatherVibe.Zone.1.EVENING.LightSandstorm   = 0     0   0      0     0
WeatherVibe.Zone.1.EVENING.MediumSandstorm  = 0     0   0      0     0
WeatherVibe.Zone.1.EVENING.HeavySandstorm   = 0     0   0      0     0
WeatherVibe.Zone.1.EVENING.Thunders         = 0     0   0      0     0

# --- NIGHT (deep winter calm or squalls)
WeatherVibe.Zone.1.NIGHT.Fine               = 0.04  25  45    90   180
WeatherVibe.Zone.1.NIGHT.Fog                = 0.14  30  55   180   360
WeatherVibe.Zone.1.NIGHT.LightRain          = 0     0   0      0     0
WeatherVibe.Zone.1.NIGHT.MediumRain         = 0     0   0      0     0
WeatherVibe.Zone.1.NIGHT.HeavyRain          = 0     0   0      0     0
WeatherVibe.Zone.1.NIGHT.LightSnow          = 0.38  35  60   270   420
WeatherVibe.Zone.1.NIGHT.MediumSnow         = 0.32  30  55   180   360
WeatherVibe.Zone.1.NIGHT.HeavySnow          = 0.12  25  45   120   240
WeatherVibe.Zone.1.NIGHT.LightSandstorm     = 0     0   0      0     0
WeatherVibe.Zone.1.NIGHT.MediumSandstorm    = 0     0   0      0     0
WeatherVibe.Zone.1.NIGHT.HeavySandstorm     = 0     0   0      0     0
WeatherVibe.Zone.1.NIGHT.Thunders           = 0     0   0      0     0

#######################################################################################################
#######################################################################################################
# Zone configuration — Ashenvale (331)
# Schema per line:
# WeatherVibe.Zone.<zoneId>.<DAYPART>.<State> = <weight> <min%> <max%> <minDwellSec> <maxDwellSec>
#
# % values are relative to the InternalRange for that daypart+state.
# Fade-in starts at 0% (= InternalRange.MIN), fade-out starts at InternalRange.MAX.
# Dwell-time excludes fade durations.
#######################################################################################################

# --- MORNING (soft mist, dew, filtered light)
WeatherVibe.Zone.331.MORNING.Fine            = 0.35  40  60   180   360
WeatherVibe.Zone.331.MORNING.Fog             = 0.25  25  45   240   420
WeatherVibe.Zone.331.MORNING.LightRain       = 0.25  30  55   240   360
WeatherVibe.Zone.331.MORNING.MediumRain      = 0.12  20  40   180   300
WeatherVibe.Zone.331.MORNING.HeavyRain       = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.LightSnow       = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.MediumSnow      = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.HeavySnow       = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.LightSandstorm  = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.MediumSandstorm = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.HeavySandstorm  = 0     0   0     0     0
WeatherVibe.Zone.331.MORNING.Thunders        = 0.03   5  15    60   150

# --- AFTERNOON (lively forest, frequent gentle rain)
WeatherVibe.Zone.331.AFTERNOON.Fine          = 0.30  35  55   150   300
WeatherVibe.Zone.331.AFTERNOON.Fog           = 0.08  10  25    60   120
WeatherVibe.Zone.331.AFTERNOON.LightRain     = 0.32  35  60   240   360
WeatherVibe.Zone.331.AFTERNOON.MediumRain    = 0.23  25  50   240   360
WeatherVibe.Zone.331.AFTERNOON.HeavyRain     = 0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.LightSnow     = 0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.MediumSnow    = 0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.HeavySnow     = 0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.LightSandstorm= 0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.MediumSandstorm=0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.HeavySandstorm= 0     0   0     0     0
WeatherVibe.Zone.331.AFTERNOON.Thunders      = 0.07   8  18    90   210

# --- EVENING (moody dusk, rain with returning mist)
WeatherVibe.Zone.331.EVENING.Fine            = 0.28  30  50    60   90
WeatherVibe.Zone.331.EVENING.Fog             = 0.22  25  45   120   180
WeatherVibe.Zone.331.EVENING.LightRain       = 0.28  30  55    90   120
WeatherVibe.Zone.331.EVENING.MediumRain      = 0.16  22  45    60   90
WeatherVibe.Zone.331.EVENING.HeavyRain       = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.LightSnow       = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.MediumSnow      = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.HeavySnow       = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.LightSandstorm  = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.MediumSandstorm = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.HeavySandstorm  = 0     0   0     0     0
WeatherVibe.Zone.331.EVENING.Thunders        = 0.06   8  16    30   60

# --- NIGHT (mystical; fog + soft rain dominate)
WeatherVibe.Zone.331.NIGHT.Fine              = 0.22  25  45   120   240
WeatherVibe.Zone.331.NIGHT.Fog               = 0.33  30  55   300   450
WeatherVibe.Zone.331.NIGHT.LightRain         = 0.26  28  55   240   360
WeatherVibe.Zone.331.NIGHT.MediumRain        = 0.14  22  45   180   300
WeatherVibe.Zone.331.NIGHT.HeavyRain         = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.LightSnow         = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.MediumSnow        = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.HeavySnow         = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.LightSandstorm    = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.MediumSandstorm   = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.HeavySandstorm    = 0     0   0     0     0
WeatherVibe.Zone.331.NIGHT.Thunders          = 0.05   8  16    90   180
